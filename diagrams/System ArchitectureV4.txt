graph TD
    subgraph User Interaction
        A[User @ React Frontend]
    end

    subgraph Backend Services
        B(AI Orchestrator)
        C(Discovery Service)
        D(Execution Orchestrator)
        E(Execution Agent)
        F(Reporting Service)
    end

    subgraph Infrastructure
        G[RabbitMQ]
        H[PostgreSQL DB]
        I[MinIO Storage]
    end

    A -- 1. POST /generate-test-case --> B;
    B -- 2. POST /discover --> C;
    C -- 3. Returns UI Blueprint --> B;
    B -- 4. Generates Test Case via Gemini --> B;
    B -- 5. Publishes Job --> G;
    G -- 6. Consumes Job --> D;
    D -- 7. Forwards Job --> G;
    G -- 8. Consumes Job --> E;
    E -- 9. Executes Test with Playwright --> E;
    E -- 10. Stores Visual Baseline --> I;
    E -- 11. Writes Results --> H;
    A -- 12. GET /results --> F;
    F -- 13. Reads Results --> H;
    H -- 14. Returns Data --> F;
    F -- 15. Returns Data --> A;

    style B fill:#f9f,stroke:#333,stroke-width:2px
    style E fill:#ccf,stroke:#333,stroke-width:2px